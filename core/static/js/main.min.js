/* coding: utf-8 gifboard 09-08-2016 */!function(a,b,c,d){function e(a){this.jsonConfig=f,this.board=a}var f={url:"/gifs.json",remainingCallTime:3e4};e.prototype.init=function(){this.getJson(this.jsonConfig)},e.prototype.getJson=function(b){var c=this;a.ajax({url:b.url,dataType:"json",success:function(a){var b=c.saveJson(a);b?c.board.init():console.log("No image updates.")},error:function(a){console.log(a)},timeout:b.remainingCallTime})},e.prototype.saveJson=function(a){var b=localStorage.getItem("gifboard_images"),c=JSON.stringify(a),d=!1;return b!=c&&(localStorage.setItem("gifboard_images",c),d=!0),d},b.ImageFetcher=e}(jQuery,window,document),function(a,b,c,d){function e(a){this.container=a,this.father=this.container.find("div.image--father"),this.child=this.container.find("div.image--child"),this.childIndex=!1,this.fatherIndex=!1}e.prototype.init=function(){images=this.parseImages(localStorage.getItem("gifboard_images")),this.renderImages(images)},e.prototype.parseImages=function(a){return JSON.parse(a)},e.prototype.renderImages=function(a){this.childIndex=this.randomInt(0,a.length-1),this.fatherIndex=this.childIndex+1,this.fatherIndex>=a.length&&(this.fatherIndex=0),this.child.css("background-image","url("+a[this.childIndex]+")"),this.father.css("background-image","url("+a[this.fatherIndex]+")")},e.prototype.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},b.Board=e}(jQuery,window,document);var fetchInit=function(a){a.init()},main=function(){var a=new Board($("section.board"));a.init();var b=new ImageFetcher(a);setInterval(fetchInit,3e3,b)};$(main);