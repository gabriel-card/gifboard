/* coding: utf-8 gifboard 10-08-2016 */!function(a,b,c,d){function e(a){this.jsonConfig=f,this.board=a}var f={url:"/gifs.json",remainingCallTime:3e4};e.prototype.init=function(){this.getJson(this.jsonConfig)},e.prototype.getJson=function(b){var c=this;a.ajax({url:b.url,dataType:"json",success:function(a){var b=c.saveJson(a);b?c.board.updateImages():console.log("No image updates.")},error:function(a){console.log(a)},timeout:b.remainingCallTime})},e.prototype.saveJson=function(a){var b=localStorage.getItem("gifboard_images"),c=JSON.stringify(a),d=!1;return b!=c&&(localStorage.setItem("gifboard_images",c),d=!0),d},b.ImageFetcher=e}(jQuery,window,document),function(a,b,c,d){function e(a){this.container=a,this.father=a.find(".board__image.image--father"),this.child=a.find(".board__image.image--child"),this.images=[],this.childIndex=!1,this.fatherIndex=!1,this.config={animationInterval:8e3}}e.prototype.init=function(){this.updateImages(),this.renderImages(this.images,this),setInterval(this.renderImages,this.config.animationInterval,this.images,this)},e.prototype.parseImages=function(a){return JSON.parse(a)||[]},e.prototype.updateImages=function(){this.images=this.parseImages(localStorage.getItem("gifboard_images"))},e.prototype.renderImages=function(a,b){return b.updateImages(),a.length?(b.childIndex!==!1?(b.childIndex++,b.childIndex>=a.length&&(b.childIndex=0)):b.childIndex=b.randomInt(0,a.length-1),b.fatherIndex=b.childIndex+1,b.fatherIndex>=a.length&&(b.fatherIndex=0),b.child.css("background-image","url("+a[b.childIndex]+")"),void b.father.css("background-image","url("+a[b.fatherIndex]+")")):console.log("no images to be displayed!")},e.prototype.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},b.Board=e}(jQuery,window,document);var fetchInit=function(a){a.init()},main=function(){var a=new Board($("section.board"));a.init();var b=new ImageFetcher(a);fetchInit(b),setInterval(fetchInit,3e4,b)};$(main);